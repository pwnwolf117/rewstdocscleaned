# Organization Variables

## **Overview**

Organization Variables serve as the foundational elements for setting and managing configurations across different organizational levels within Rewst. They ensure consistency and control within workflows and facilitate efficient management across the organizational hierarchy.

***

## **Inheritance and Overrides**

* **Inheritance**: Values set at the parent organization cascade down, providing a default setup for all client organizations.
* **Overrides**: Sub-organizations can establish their own variables, prioritizing local settings over inherited defaults.

***

## **Usage in Workflows**

Access variables seamlessly in any workflow with the following syntax:

```django
{{ ORG.VARIABLES.<variable_name> }}
```

***

## **Naming Conventions**

* Employ descriptive and straightforward wording using `snake_case` for clarity.
* Prefix integration-specific variables appropriately, like `psa_` for PSA-related variables.

{% hint style="info" %}
**Defining Boolean Values:** always use lowercase `true` or `false` to align with Rewst's standardized practices. This uniform approach applies to all future workflow designs. Existing legacy workflows may display variations.
{% endhint %}

***

## **Use as Default Feature**

The "Use as Default" feature allows managing organizations to set a universal default value for an ORG variable. This default is applied to sub-organizations unless they specify their own value.

### **How "Use as Default" Works**

* **Setting a Default**: When you set a variable as default at the MSP level, it becomes the fallback for sub-organizations without a specified value.
* **Workflow Execution Context**:
  * The default value is only utilized if the workflow is initiated from the managing organization.
  * To apply the default value to Client A, the workflow must start from the MSP, even if it operates within Client Aâ€™s context.
* **Triggers and Context**:
  * Implementing triggers in the workflow ensures that the execution context is recognized. This facilitates the use of MSP-level defaults in sub-organization workflows.

***

## Onboarding Requirements

Certain ORG Variables are essential for onboarding processes and are utilized by the Get and Set ORG Variables Workflow to ensure smooth integration and setup for new users or systems.

<table data-full-width="true"><thead><tr><th>Form Field</th><th>Variable</th><th>Use</th><th>Valid Values</th></tr></thead><tbody><tr><td>Default PSA</td><td><code>default_psa</code></td><td>Identifies the PSA that you use</td><td><code>cw_manage</code> <code>kaseya_bms</code> etc</td></tr><tr><td>Default RMM</td><td><code>default_rmm</code></td><td>Identifies the RMM that you use</td><td><code>cw_automate</code> <code>datto_rmm</code> <code>ninja_rmm</code> <code>kaseya_vsa</code> etc</td></tr><tr><td>Primary Identity Provider</td><td><code>primary_identity_provider</code></td><td>Specify where users are created for the organization, either on premise or in Azure</td><td><code>on_prem</code> <code>azure_ad, jumpcloud</code></td></tr><tr><td>Default Ticket Location</td><td><code>psa_default_board_id</code></td><td>The default PSA board (or other organizing feature) that Rewst will use to create tickets on when running automations</td><td>(depends on psa)</td></tr><tr><td>Default Ticket Status</td><td><code>psa_default_ticket_status</code></td><td>The default ticket status that Rewst will use when updating tickets. This is the status that Rewst will use when actively working on a ticket. It usually set to "In Progress" or a similar status.</td><td>name or id of ticket status</td></tr><tr><td>Ticket Status while Waiting for Input</td><td><code>psa_ticket_status_waiting_input</code></td><td>The default ticket status that Rewst will use when tickets are waiting for user input. This applies in cases where the automation will pause and prompt a technician to do an additional step outside of the automation before then returning to the ticket to confirm that action has taken place. This will then kickoff the automation to continue from the position it left off.</td><td>name or id of ticket status</td></tr><tr><td>Ticket Status when Workflow Complete</td><td><code>psa_ticket_status_completed_task</code></td><td>The default ticket status that Rewst will use when we finish an automation. Consider this the "quality check" status to make sure everything ran properly.</td><td>name or id of ticket status</td></tr><tr><td>No Time in Tickets</td><td><code>psa_no_ticket_time</code></td><td>Set this when you don't want automation to put time_worked in tickets. The "Yes" option will add notes in the ticket we create when running an automation. The "No" option will let us impersonate a technician to apply time under there name for automations that run. We do this because we can't apply time via the API for most PSAs.</td><td><code>1</code> or <code>0</code> (boolean )</td></tr><tr><td>Default Tech ID</td><td><code>psa_default_tech_id</code></td><td>Tech Id to user when updating ticket time</td><td>id of tech to use for time entries</td></tr><tr><td>Default Work Role</td><td><code>psa_default_tech_workrole</code></td><td>Tech Work Type to user when updating ticket time</td><td>id of tech work type to use for time entries</td></tr><tr><td>Default Work Type</td><td><code>psa_default_tech_worktype</code></td><td>Tech Work Role to user when updating ticket time</td><td>id of tech work role to use for time entries</td></tr><tr><td>New User Ticket Type</td><td><code>psa_new_user_ticket_type</code></td><td>Ticket Type to use on the New User Board when creating a ticket</td><td><code>int</code> for type_id in CWM</td></tr><tr><td>New User Ticket Subtype</td><td><code>psa_new_user_ticket_subtype</code></td><td>Ticket SubType to use on the New User Board when creating a ticket</td><td><code>int</code> for subtype_id in CWM</td></tr><tr><td>New User Ticket Item</td><td><code>psa_new_user_ticket_item</code></td><td>Ticket Item to use on the New User Board when creating a ticket</td><td><code>int</code> for item_id in CWM</td></tr><tr><td>Time Entry Ticket Status</td><td><code>time_entry_ticket_status</code></td><td>Set tickets to this status to enable time entry</td><td><code>str</code>Status Name or <code>int</code> ID to use</td></tr><tr><td>New User Approval Email</td><td><code>new_user_approval_email</code></td><td>When email approval is needed for new user adds, use this address</td><td>email address</td></tr><tr><td>Require Approval For New User</td><td><code>require_approval_for_new_users</code></td><td>Controls the new user approval requirement.</td><td>(<code>1</code> or <code>0</code>) or (<code>true</code> or <code>false</code>)</td></tr><tr><td>Require Authorization for License Purchases</td><td><code>m365_require_authorization_for_new_licenses</code></td><td>Pause workflows for <code>Inquiry</code> when new license purchases are needed</td><td><code>1</code> or <code>0</code> (boolean )</td></tr><tr><td>Require Approval For Offboarding Users</td><td><code>require_approval_for_offboarding_users</code></td><td>Controls the new user approval requirement.</td><td><code>bool</code></td></tr><tr><td>Offboard User Approval Email</td><td><code>offboarding_user_approval_email</code></td><td>When email approval is needed for offobarding users, use this address</td><td>email address</td></tr><tr><td>New User Password Save Location</td><td><code>new_user_password_save_locations</code></td><td>Where to store the password during new user creation. Default to PSA if not defined</td><td><em>List</em> of <code>psa``itglue``hudu``custom-pwpush</code>other systems</td></tr><tr><td>New User Password Save Location Custom URL</td><td><code>new_user_password_save_location_custom_url</code></td><td>In the event that we are storing a password in a custom PWPush, put the URL here</td><td></td></tr><tr><td>User Start Date Action</td><td><code>user_start_date_action</code></td><td>How to handle <code>start_date</code> in user onboarding</td><td><em>default</em> <code>document_only</code> : only show in ticket</td></tr><tr><td>Override Email Domains</td><td><code>override_email_domains</code></td><td>List of email domains to show rather than querying from M365</td><td>List of domains</td></tr><tr><td>New User Automation Task Time</td><td><code>automation_task_new_user_time</code></td><td>Default time for the "New User" workflow, to add to the ticket at completion</td><td><code>int</code> in minutes</td></tr><tr><td>Offboard User Automation Task Time</td><td><code>automation_task_offboard_user_time</code></td><td>Default time for the "Offboard User" workflow, to add to the ticket at completion</td><td><code>int</code> in minutes</td></tr><tr><td>VIP Contact Type</td><td><code>psa_vip_contact_type</code></td><td>Contact Type to set for VIP users</td><td>name or id of Contact Type</td></tr><tr><td>Adds a field on forms for specific approver email</td><td><code>new_user_manual_approver_field</code></td><td>Allows the field in New User to show up and add a specific e-mail approver</td><td><code>1</code> or <code>0</code> (boolean )</td></tr><tr><td>New Ticket for License Purchases</td><td><code>license_purchases_in_new_ticket</code></td><td>When prompting in tickets for license purchases, do so in a new ticket</td><td><code>1</code> or <code>0</code> (boolean )</td></tr><tr><td>Board ID for License Tickets</td><td><code>psa_license_purchase_board_id</code></td><td>The PSA Board ID to use when license purchases are in a separate ticket</td><td><code>int</code> board_id for CWM</td></tr><tr><td>Active Customer Statuses</td><td><code>psa_active_customer_status</code></td><td>Statuses in PSA for active customer organizations</td><td>List of <code>status</code> types from PSA</td></tr><tr><td>Default Priority</td><td><code>psa_default_ticket_priority</code></td><td>The default ticket priority that Rewst will use when creating tickets</td><td>name or id of ticket status</td></tr><tr><td>Default Agreement Name</td><td><code>psa_default_agreement_name</code></td><td>If you set a default agreement in your PSA on ticket creation, enter the name of it here.</td><td><code>str</code> name of agreement</td></tr><tr><td>Send From Address</td><td><code>psa_send_from_address</code></td><td>When sending mail, we can set the "replyTo" address to this, to allow for proper ticket responses</td><td><code>str</code> email addr</td></tr><tr><td>Store Password in Ticket</td><td><code>psa_store_password_in_ticket</code></td><td>When documenting the password, this will never store it in the ticket if set to false</td><td><code>bool</code></td></tr><tr><td>Microsoft Licensing Distributor</td><td><code>ms_licensing_distributor</code></td><td>Microsoft License Distributor (where to purchase CSP licenses)</td><td><code>pax8</code> <code>microsoft_csp</code></td></tr><tr><td>Mandatory Licensing Groups</td><td><code>m365_mandatory_license_groups</code></td><td>If you use license groups with Microsoft 365 you can specify those groups here. This allows you to create a group of licenses that the user will be added to if selected.</td><td><code>list</code> of <code>group_names</code></td></tr><tr><td>Username Format</td><td><code>username_format</code></td><td>The format of the users username</td><td><code>flast</code> <code>firstl</code> <code>firstmlast</code></td></tr><tr><td>Preferred Domain Controller</td><td><code>preferred_domain_controller</code></td><td>Choose this DC instead of letting automation decide</td><td>ComputerName in RMM</td></tr><tr><td>Preferred ADConnect Server</td><td><code>rmm_preferred_adconnect_server</code></td><td>If your ADConnect is on a specific server, specify it here</td><td><code>str</code> hostname of server</td></tr><tr><td>On-Prem Exchange Server</td><td><code>onprem_exchange_server</code></td><td>Server name to use if you have on-prem Exchange</td><td>ComputerName in RMM</td></tr><tr><td>On-Prem Hybrid Exchange</td><td><code>onprem_hybrid_exchange</code></td><td>Set to true to identify this client as using Hybrid Exchange setup (Usage of Enable-RemoteMailbox)</td><td></td></tr><tr><td>Preferred Phone Number Format</td><td><code>phone_number_format</code></td><td>Format to use for phone numbers (stringifies ints with formatting)</td><td><code>NXX NXX XXXX</code> <code>NXXNXXXXXX</code> <code>NXX-NXX-XXXX</code> <code>NXX.NXX.XXXX</code></td></tr><tr><td>No PSA - Mail to Address</td><td><code>no_psa_mail_address</code></td><td>If there is no PSA, we will mail information to this address</td><td><code>str</code> email addr</td></tr><tr><td>On-Prem No AD Sync (not in form)</td><td><code>onprem_no_adsync</code></td><td>If there is no ADSync configured between on-prem and M365 (needs to be added manually)</td><td><code>bool</code></td></tr><tr><td>M365 Usage Location (not in form)</td><td><code>m365_usage_location</code></td><td>Country Code such as "US" or GB"</td><td><code>str</code></td></tr><tr><td>All Internal Notes</td><td><code>psa_all_notes_internal</code></td><td>When adding notes, check if they should all be internal or allowed some external</td><td><code>bool</code></td></tr><tr><td>Crate - Sync Contacts - Report Only</td><td><code>crate_sync_contacts_report_only</code></td><td>If a user is missing, this will create a ticket for them with the relevant user information</td><td><code>bool</code></td></tr><tr><td>No Azure AD</td><td><code>no_azure_ad</code></td><td>ORG Does not use AzureAD</td><td><code>bool</code></td></tr><tr><td>IT Glue Custom Actions</td><td><code>itglue_custom_actions</code></td><td>If the client uses ITG, this will trigger a subworkflow for actions in the user onboarding workflow</td><td><code>bool</code></td></tr><tr><td>PSA Custom Note</td><td><code>psa_custom_note</code></td><td>If the client wants a custom note on a ticket, we can use this variable to branch off on update tickets</td><td><code>string</code></td></tr><tr><td>PSA Custom Actions</td><td><code>psa_custom_actions</code></td><td>Used to allow a sub-workflow execution at the end of the new employee workflow (set to 1 to enable)</td><td><code>bool</code></td></tr><tr><td>PSA Default Ticket Source</td><td><code>psa_default_ticket_source</code></td><td>Used in the Datto creation of the ticket during new user workflow and defines the source of the ticket</td><td><code>int</code></td></tr><tr><td>HUDU Create Contact In Asset</td><td><code>hudu_create_contact_in_asset</code></td><td>Used to create a contact in Hudu and the password and relate them togehter</td><td><code>int</code></td></tr><tr><td>Licensing Choose Subscription</td><td><code>licencing_choose_subscription</code></td><td>Used to decide whether the "Show Subs" option appears in New User Onboarding form</td><td><code>bool</code></td></tr><tr><td>Form Default: Supervisor</td><td><code>form_default_supervisor</code></td><td>Used so that if the form forces a default, this is the value supplied in the if statement</td><td><code>string</code></td></tr><tr><td>Form Default: OU (OrgUnit)</td><td><code>form_default_orgunit</code></td><td>Used so that if the form forces a default, this is the value supplied in the if statement. Example is [{"id": "fb53fb9f-208f-451c-9391-6092eb7c4e1b","label":"OU=Disabled Users,OU=Pedro Users,OU=Pedro Ltd,DC=ad2,DC=pedroaviary,DC=com"}]</td><td><code>list</code></td></tr><tr><td>Form Default: Location</td><td><code>form_default_location</code></td><td>Used so that if the form forces a default, this is the value supplied in the if statement</td><td><code>string</code></td></tr><tr><td>Form Default: Email Domain</td><td><code>form_default_email_domain</code></td><td>Used so that if the form forces a default, this is the value supplied in the if statement</td><td><code>string</code></td></tr><tr><td>Form Default: License SKU</td><td><code>form_default_license_sku</code></td><td>Used so that if the form forces a default, this is the value supplied in the if statement</td><td><code>list</code></td></tr><tr><td>Form Default: Department</td><td><code>form_default_department</code></td><td>Used so that if the form forces a default, this is the value supplied in the if statement. Example is [{"id": "68c2878a-6739-438c-bf5a-d8c2bea39573","label": "Dist Group Two"},{"id": "936eb764-36c4-4ac6-b264-c532caeb217c","label": "Group Me Up Buttercup - Distribution"}]</td><td><code>list</code></td></tr><tr><td>Form Default: On-Prem Groups</td><td><code>form_default_onprem_groups</code></td><td>Used so that if the form forces a default, this is the value supplied in the if statement. Example is [{"id": "68c2878a-6739-438c-bf5a-d8c2bea39573","label": "Dist Group Two"},{"id": "936eb764-36c4-4ac6-b264-c532caeb217c","label": "Group Me Up Buttercup - Distribution"}]</td><td><code>list</code></td></tr><tr><td>Form Default: AAD Groups</td><td><code>form_default_aad_groups</code></td><td>Used so that if the form forces a default, this is the value supplied in the if statement. Example is [{"department": "Jesse"},{"department": "dam"}]</td><td><code>list</code></td></tr><tr><td>Form Default: AAD Security Groups</td><td><code>form_default_security_aad_groups</code></td><td>Used so that if the form forces a default, this is the value supplied in the if statement. Example is [{"department": "Jesse"},{"department": "dam"}]</td><td><code>list</code></td></tr><tr><td>Form Default: AAD Distribution Groups</td><td><code>form_default_distribution_aad_groups</code></td><td>Used so that if the form forces a default, this is the value supplied in the if statement. Example is [{"department": "Jesse"},{"department": "dam"}]</td><td><code>list</code></td></tr><tr><td>Form Default: Default Phone Number</td><td><code>form_default_phone_number</code></td><td>Used in the workflow itself that if the org var is specified, it'll use it if none on the form</td><td><code>string</code></td></tr><tr><td>Form Default: new_user_azure_ad_attributes_to_copy</td><td><code>new_user_azure_ad_attributes_to_copy</code></td><td>Used to specify which properties of the user being copied to apply to the new user Example is ["location","city","street_address","desk_phone","company","usage_location","department","user_title","mobile_phone","postcode","state"]</td><td><code>list</code></td></tr><tr><td>Form Option: Send password via SMS</td><td><code>send_sms_to_user</code></td><td>Sending passwords via SMS carries associated risks. Please be sure that your risk tolerance is considered before enabling this option.</td><td><code>int</code></td></tr><tr><td>CW Control Session Group Override</td><td><code>cw_control_session_group_override</code></td><td>This org variable setting will allow you to use a different session group than All Machines. The session group name needs to match whatever session group you would like to use and is case sensitive. Example: All Machines by Company</td><td><code>string</code></td></tr><tr><td>Manual License Confirmation No Pod Notification</td><td><code>cwm_nopod</code></td><td>This organization variable is used in the manual license purchase workflow, by default the workflow attempts to prompt for approval via a Manage pod. If pods are not configured in your environment then this org variable should be used to override the default behavior which will provide the prompt via a ticket note.</td><td><code>true</code>(string)</td></tr><tr><td>New Employee Output Exclusion Variables</td><td><code>onboard_output_ignore_vars</code></td><td>This organization variable is used to override the default output configuration exclusions for the output_context variable. Example value: ["execution_id","organization","originating_execution_id","rewst","sentry_trace","trigger_instance","max_retries","sendMail_from_user_object"]</td><td><code>list</code></td></tr><tr><td>PSA Alert Type Variable (Halo)</td><td><code>psa_alert_ticket_type</code></td><td>This organization variable is used to specify the ticket type for Halo PSA customers in workflows such as the DUO bypass user workflow and Exchange mailbox nearing quota workflow. The type id should be specified (example: 32)</td><td><code>int</code></td></tr><tr><td>PAX8 Unmapped Company Alert Exclusions</td><td><code>pax8_unmapped_alert_ignore_list</code></td><td>This organization variable is used to specify a list of Rewst OrgID's to ignore when creating alerts for the alert_on_unmapped_orgs setting in the "Pax8 Extra License Removal" workflow of the "Alert on Unused M365 Licenses" crate</td><td><code>list</code></td></tr></tbody></table>
